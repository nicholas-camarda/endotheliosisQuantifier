# Spec Requirements Document

> Spec: migrate-src-eq
> Created: 2025-08-21
> Status: Planning

## Overview

Migrate legacy scripts into a maintainable Python package under src/eq with clear module boundaries, stable imports, and tests, minimizing breakage for existing entry scripts.

## User Stories

### As a developer, I want reusable modules

As a developer, I want to import data, preprocessing, models, and pipeline utilities from eq.* so that scripts are thin wrappers and code reuse is consistent.

### As a maintainer, I want a clear layout

As a maintainer, I want a standardized package tree (eq/io, eq/augment, eq/models, etc.) so that new code lands in predictable places.

## Spec Scope

1. **Create src/eq package structure** - establish directories and __init__.py
2. **Consolidate utils into modules** - move functions from scripts/utils and scripts/main
3. **Add import shims** - keep existing scripts working by importing eq.*
4. **Root tests** - add/adjust tests for moved modules

## Out of Scope

- Model architecture redesign
- Dataset changes or new annotations

## Expected Deliverable

1. Importable eq package with modules for IO, preprocessing, augmentation, models, segmentation, metrics, and pipeline.
2. Updated scripts that import from eq.*; tests pass and runtime_check succeeds.

## Testing Strategy

- Use pytest at root tests/
- Verify behavior on real small data slices
- Smoke test pipeline via existing runtime_check and smoke_test_pipeline scripts


